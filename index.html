<!DOCTYPE html>
<html>
<head>
<title>üí≥ TERA Bank - EDE Wallet</title>
<meta name="viewport" content="width=device-width">
<style>
* {margin:0;padding:0;box-sizing:border-box;}
body {
  font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
  background: #fafafa;
  color: #1a1a1a;
  min-height: 100vh;
  padding-bottom: 100px;
}

/* üëá HEADER BANCO */
.header {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
  padding: 20px;
  position: sticky;
  top: 0;
  z-index: 100;
}
.balance-header {
  font-size: 28px;
  font-weight: 700;
  text-align: center;
  margin-bottom: 5px;
}
.saldo-label { 
  font-size: 14px; 
  opacity: 0.9; 
  text-align: center;
}

/* üëá CARDS NUBANK */
.card {
  background: white;
  margin: 16px 20px;
  border-radius: 16px;
  padding: 24px;
  box-shadow: 0 2px 12px rgba(0,0,0,0.08);
}
.card-title {
  font-size: 16px;
  font-weight: 600;
  color: #4a4a4a;
  margin-bottom: 16px;
}

/* üëá MINHA CONTA */
#carteira-section {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}
#meuNome { background: rgba(255,255,255,0.9); }

/* üëá INPUTS BANCO */
.input-group {
  position: relative;
  margin-bottom: 16px;
}
input {
  width: 100%;
  padding: 16px 16px 16px 50px;
  border: 1px solid #e1e5e9;
  border-radius: 12px;
  font-size: 16px;
  background: white;
  transition: all 0.2s;
}
input:focus {
  outline: none;
  border-color: #667eea;
  box-shadow: 0 0 0 3px rgba(102,126,234,0.1);
}

/* üëá ICONES INPUT */
.input-group:before {
  position: absolute;
  left: 16px;
  top: 50%;
  transform: translateY(-50%);
  font-size: 20px;
}
.input-group:nth-child(1):before { content: "üë§"; }
.input-group:nth-child(2):before { content: "üì±"; }
.input-group:nth-child(3):before { content: "‚Çø"; }

/* üëá BOT√ïES PIX */
.btn {
  width: 100%;
  padding: 16px;
  border: none;
  border-radius: 12px;
  font-size: 16px;
  font-weight: 600;
  margin-bottom: 12px;
  transition: all 0.2s;
  cursor: pointer;
}
.btn-primary {
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  color: white;
}
.btn-primary:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 25px rgba(102,126,234,0.4);
}
.btn-secondary {
  background: white;
  color: #667eea;
  border: 1px solid #667eea;
}

/* üëá LEDGER STYLE */
.ledger {
  max-height: 400px;
  overflow-y: auto;
  background: #f8f9fa;
}
.tx-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px;
  border-bottom: 1px solid #f0f0f0;
}
.tx-info { flex: 1; }
.tx-fromto { 
  font-size: 14px; 
  color: #666; 
  margin-bottom: 4px;
}
.tx-amount {
  font-size: 20px;
  font-weight: 700;
}
.positive { color: #00d4aa; }
.negative { color: #ff3b30; }

.status {
  padding: 8px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
}
.status-sent { background: rgba(255,59,48,0.1); color: #ff3b30; }
.status-received { background: rgba(0,212,170,0.1); color: #00d4aa; }

/* üëá MOBILE PERFECT */
@media (max-width: 480px) {
  .header { padding: 16px; }
  .balance-header { font-size: 24px; }
  .card { margin: 12px 16px; padding: 20px; }
}
</style>
</head>
<body>
<div class="header">
  <div class="saldo-label">Saldo em EDE</div>
  <div class="balance-header" id="balance">0 EDE</div>
</div>

<!-- üëá MINHA CONTA (TOPO) -->
<div class="card" id="carteira-section">
  <div class="card-title">üí≥ Minha Conta EDE</div>
  <input id="meuNome" placeholder="Nome da sua conta EDE">
  <button class="btn btn-secondary" onclick="salvarMinhaCarteira()">
    üíæ Salvar Conta EDE
  </button>
  <div id="infoCarteira" style="font-size:14px;margin-top:8px;"></div>
</div>

<!-- üëá TRANSFERIR EDE -->
<div class="card">
  <div class="card-title">‚ö°Ô∏è Transferir EDE</div>
  <div class="input-group">
    <input id="from" placeholder="De (sua conta EDE)" readonly>
  </div>
  <div class="input-group">
    <input id="to" placeholder="Conta EDE destino">
  </div>
  <div class="input-group">
    <input id="amount" type="number" placeholder="0 EDE" step="0.00000001">
  </div>
  <button class="btn btn-primary" onclick="sendTx()">
    ‚û°Ô∏è Transferir EDE
  </button>
</div>

<!-- üëá EXTRATO EDE -->
<div class="card">
  <div class="card-title">üìã Extrato EDE</div>
  <div id="ledger" class="ledger"></div>
</div>

<script>
// VARI√ÅVEIS GLOBAIS
let balance = 0;
let transactions = JSON.parse(localStorage.getItem('teraTxs')) || [];
let minhaCarteira = localStorage.getItem('teraCarteira') || '';

// CARREGAR
document.getElementById('from').value = minhaCarteira;
document.getElementById('meuNome').value = minhaCarteira;
updateInfoCarteira();

function updateInfoCarteira() {
  const info = document.getElementById('infoCarteira');
  info.innerHTML = minhaCarteira ? 
    `‚úÖ Conta EDE ativa: ${minhaCarteira.slice(0,12)}...` : 
    '‚ùå Cadastre sua conta EDE';
}

async function salvarMinhaCarteira() {
  const nome = document.getElementById('meuNome').value.trim();
  if(!nome) return alert('Digite o nome da sua conta EDE!');
  
  localStorage.setItem('teraCarteira', nome);
  minhaCarteira = nome;
  document.getElementById('from').value = nome;
  updateInfoCarteira();
  alert('‚úÖ Conta EDE salva!');
}

async function sendTx() {
  const from = document.getElementById('from').value.trim();
  const to = document.getElementById('to').value.trim();
  const amount = parseFloat(document.getElementById('amount').value);
  
  if(!from || !to || !amount || amount <= 0) {
    return alert('Preencha todos os campos corretamente!');
  }
  
  const txHash = '0x' + Math.random().toString(16).substr(2,64);
  const timestamp = new Date().toLocaleString('pt-BR');
  
  const tx = { 
    from, to, amount, 
    hash: txHash.slice(0,16), 
    time: timestamp,
    type: from === minhaCarteira ? 'sent' : 'received'
  };
  
  transactions.unshift(tx);
  localStorage.setItem('teraTxs', JSON.stringify(transactions.slice(0,50)));
  
  if(tx.type === 'sent') balance -= amount;
  else balance += amount;
  
  updateBalance();
  loadLedger();
  
  document.getElementById('to').value = '';
  document.getElementById('amount').value = '';
  
  alert(`‚úÖ Transfer√™ncia EDE realizada!
ID: ${tx.hash}`);
}

function updateBalance() {
  document.getElementById('balance').innerHTML = 
    `${balance.toLocaleString('pt-BR', {minimumFractionDigits:8,maximumFractionDigits:8})} EDE`;
}

function loadLedger() {
  const ledger = document.getElementById('ledger');
  let html = '';
  
  transactions.slice(0,10).forEach(tx => {
    if(tx.from !== minhaCarteira && tx.to !== minhaCarteira) return;
    
    const typeClass = tx.from === minhaCarteira ? 'negative' : 'positive';
    const typeLabel = tx.from === minhaCarteira ? 'Enviado' : 'Recebido';
    const statusClass = tx.from === minhaCarteira ? 'status-sent' : 'status-received';
    
    html += `
      <div class="tx-item">
        <div class="tx-info">
          <div class="tx-fromto">
            ${tx.from.slice(0,10)}... ‚Üí ${tx.to.slice(0,10)}...
          </div>
          <div class="tx-amount ${typeClass}">${tx.amount.toFixed(8)} EDE</div>
        </div>
        <div>
          <div class="status ${statusClass}">${typeLabel}</div>
        </div>
      </div>
    `;
  });
  
  ledger.innerHTML = html || '<div style="padding:40px;text-align:center;color:#999;">Nenhuma transa√ß√£o EDE</div>';
}

// AUTO-REFRESH
setInterval(() => {
  loadLedger();
  updateBalance();
}, 3000);

loadLedger();
updateBalance();
</script>
</body>
</html>