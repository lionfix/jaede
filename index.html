<!DOCTYPE html>
<html>
<head>
<title>âš¡ï¸ PAYEDE INT. v16.1 - Seylor Senesh Admin</title>
<meta name="viewport" content="width=device-width">
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:system-ui;background:#f5f5f5;min-height:100vh;padding:20px;}
.header{background:linear-gradient(135deg,#667eea,#764ba2);color:white;padding:25px;border-radius:20px;text-align:center;margin-bottom:25px;}
.card{background:white;border-radius:20px;padding:30px;margin-bottom:25px;box-shadow:0 8px 30px rgba(0,0,0,0.1);}
.btn{width:100%;padding:16px;border:none;border-radius:12px;font-size:16px;font-weight:600;cursor:pointer;margin:8px 0;transition:all 0.3s;}
.btn-primary{background:linear-gradient(135deg,#4caf50,#45a049);color:white;}
.btn-success{background:linear-gradient(135deg,#28a745,#20c997);color:white;}
.btn-admin{background:linear-gradient(135deg,#ff6b6b,#ee5a52);color:white;}
input{width:100%;padding:16px;border:1px solid #e1e5e9;border-radius:12px;font-size:16px;margin:8px 0;}
.balance-display{font-size:28px;font-weight:bold;color:#4caf50;text-align:center;margin:20px 0;}
.picpay-section{background:#1a73e8;padding:20px;border-radius:15px;color:white;text-align:center;margin:20px 0;}
#qrPicPay{max-width:250px;height:250px;border-radius:10px;}
.wallet-info{background:#f0f8f0;padding:15px;border-radius:10px;margin:10px 0;}
.admin-section{background:#fff3cd;padding:20px;border-radius:15px;border:2px dashed #ffc107;}
.admin-wallet{background:#d4edda !important;border-color:#28a745 !important;}
@media(max-width:768px){input{font-size:14px;padding:14px;}}
</style>
</head>
<body>
<div class="header">
  <h1>âš¡ï¸ PAYEDE INT. v16.1</h1>
  <div style="font-size:14px;opacity:0.9;">Plataforma PAYEDE INT. - Seylor Senesh Admin</div>
</div>

<!-- ğŸ’³ CRIAR NOVA CARTEIRA -->
<div class="card">
  <h3 style="color:#2c5aa0;">â• Criar Nova Carteira (R$2 = 10 EDE)</h3>
  <input id="nomeCompleto" placeholder="ğŸ‘¤ Nome completo do usuÃ¡rio">
  <div class="picpay-section">
    <canvas id="qrPicPay"></canvas>
    <div style="font-size:20px;font-weight:bold;margin:15px 0;">R$ 2,00 PicPay Digital</div>
    <div style="font-size:14px;">
      âœ… Comprovante: "PicPay Digital Ltda"<br>
      âœ… Copie "ID da transaÃ§Ã£o" do comprovante
    </div>
  </div>
  <input id="txidPicPay" placeholder="ğŸ“‹ ID da transaÃ§Ã£o PicPay">
  <button class="btn btn-primary" onclick="verificarPicPay()">âœ… Ativar Carteira</button>
</div>

<!-- ğŸ‘¤ MINHA CARTEIRA (SEYLOR SENESH) -->
<div class="card">
  <h3>ğŸ‘‘ Admin: Seylor Senesh</h3>
  <div class="balance-display" id="meuSaldo">0 EDE</div>
  <div id="walletInfo" class="wallet-info" style="display:none;">
    <strong>ğŸ†” ID:</strong> <span id="minhaWalletId"></span><br>
    <strong>ğŸ‘¤ Titular:</strong> <span id="nomeTitular"></span><br>
    <strong>ğŸ” Chave:</strong>
  </div>
  <input id="minhaChave" readonly>
  <button class="btn btn-success" onclick="copiarMinhaChave()">ğŸ“‹ Copiar Minha Chave</button>
</div>

<!-- ğŸ”€ TRANSFERÃŠNCIAS -->
<div class="card">
  <h3>ğŸ”€ Transferir EDE</h3>
  <input id="destinoChave" placeholder="ğŸ”‘ Chave Ãºnica destinatÃ¡rio">
  <input id="quantidadeEDE" type="number" placeholder="ğŸ’° Quantidade EDE" min="0.1" step="0.1">
  <button class="btn btn-primary" onclick="fazerTransferencia()">ğŸš€ Transferir</button>
  <div id="statusTransferencia"></div>
</div>

<!-- ğŸ”§ ADMIN DASHBOARD -->
<div class="card admin-section">
  <h3>ğŸ”§ Admin Dashboard - Todas Carteiras</h3>
  <button class="btn btn-admin" onclick="payEDE_INT.criarCarteiraAdmin()" style="width:auto;margin-bottom:15px;">ğŸ”„ Recarregar Admin</button>
  <div id="todasWallets">Carregando...</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
<script>
// === PAYEDE INT. v16.1 - CARTEIRA ADMIN FORÃ‡ADA ===
class PayEDE_INT {
  constructor() {
    this.wallets = JSON.parse(localStorage.getItem('payedeINTWallets')) || [];
    this.transactions = JSON.parse(localStorage.getItem('payedeINTTransactions')) || [];
    this.totalVendas = parseInt(localStorage.getItem('totalVendas')) || 0;
    this.pagamentos = new Set(JSON.parse(localStorage.getItem('picpayPagos')) || []);
    this.criarCarteiraAdmin(); // SEMPRE CRIA
    this.minhaWallet = this.carregarMinhaWallet();
    this.init();
  }
  
  // ğŸ”¥ CARTEIRA ADMIN SEYLOR SENESH - FORÃ‡ADA SEMPRE
  criarCarteiraAdmin() {
    const CHAVE_ADMIN = 'PAYEDE_INT_ADMIN_10000_7b4f2a9c8d3e5f1g2h3i4j5k6l7m8n9o';
    const adminWallet = {
      id: 'PAY000000',
      nome: 'Seylor Senesh',
      privateKey: CHAVE_ADMIN,
      balance: 10000,
      txid: 'ADMIN_MASTER_PAYEDE_INT',
      status: 'admin',
      data: new Date().toLocaleString('pt-BR'),
      split: { total: 0, admin: 0, marketing: 0, reserva: 0 }
    };
    
    // SOBRESCREVE OU CRIA
    const adminIndex = this.wallets.findIndex(w => w.id === 'PAY000000');
    if (adminIndex > -1) {
      this.wallets[adminIndex] = adminWallet;
    } else {
      this.wallets.unshift(adminWallet);
    }
    
    localStorage.setItem('minhaChavePrivada', CHAVE_ADMIN);
    this.minhaWallet = adminWallet;
    this.salvarTudo();
    console.log('âœ… Admin Seylor Senesh carregada: 10.000 EDE');
  }
  
  init() {
    this.gerarQRPicPay();
    this.renderTudo();
  }
  
  gerarQRPicPay() {
    const usernamePicPay = 'jaedesystemint'; // MUDE AQUI
    const picpayUrl = `picpay://pay?username=${usernamePicPay}&amount=2.00`;
    QRCode.toCanvas(document.getElementById('qrPicPay'), picpayUrl);
  }
  
  verificarPicPay() {
    const nome = document.getElementById('nomeCompleto').value.trim();
    const txid = document.getElementById('txidPicPay').value.trim();
    
    if (!nome || nome.length < 3) return alert('âŒ Nome completo obrigatÃ³rio!');
    if (!txid || this.pagamentos.has(txid)) return alert('âŒ ID PicPay invÃ¡lido!');
    
    this.processarCompra(nome, txid);
  }
  
  processarCompra(nome, txid) {
    this.totalVendas++;
    const walletId = `PAY${this.totalVendas.toString().padStart(6, '0')}`;
    const privateKey = this.gerarChaveUnica();
    
    const wallet = {
      id: walletId,
      nome: nome,
      privateKey: privateKey,
      balance: 10,
      txid: txid,
      status: 'ativo',
      data: new Date().toLocaleString('pt-BR')
    };
    
    this.wallets.push(wallet);
    this.pagamentos.add(txid);
    this.salvarTudo();
    
    this.renderTudo();
    alert(`âœ… Carteira ${walletId} criada!\nğŸ‘¤ ${nome}\nğŸ’° 10 EDE liberados!`);
  }
  
  gerarChaveUnica() {
    const array = new Uint8Array(32);
    crypto.getRandomValues(array);
    const hex = Array.from(array, byte => byte.toString(16).padStart(2, '0')).join('');
    return `PAYEDE_INT_${Date.now()}_${hex.slice(0,32)}`;
  }
  
  fazerTransferencia() {
    const destino = document.getElementById('destinoChave').value.trim();
    const qtd = parseFloat(document.getElementById('quantidadeEDE').value);
    
    if (!this.minhaWallet) return alert('âŒ Carregue sua carteira admin!');
    if (qtd > this.minhaWallet.balance || qtd <= 0) return alert('âŒ Saldo insuficiente!');
    
    const destinatario = this.wallets.find(w => w.privateKey === destino);
    if (!destinatario) return alert('âŒ Chave invÃ¡lida!');
    
    this.minhaWallet.balance -= qtd;
    destinatario.balance += qtd;
    
    const tx = { id: `TX${Date.now()}`, from: this.minhaWallet.id, to: destinatario.id, amount: qtd, data: new Date().toLocaleString('pt-BR') };
    this.transactions.unshift(tx);
    this.salvarTudo();
    this.renderTudo();
    
    document.getElementById('statusTransferencia').innerHTML = `<div style="color:#28a745;">âœ… ${qtd} EDE â†’ ${destinatario.nome}</div>`;
  }
  
  salvarTudo() {
    localStorage.setItem('payedeINTWallets', JSON.stringify(this.wallets));
    localStorage.setItem('payedeINTTransactions', JSON.stringify(this.transactions));
    localStorage.setItem('picpayPagos', JSON.stringify([...this.pagamentos]));
    localStorage.setItem('totalVendas', this.totalVendas);
  }
  
  carregarMinhaWallet() {
    const chaveSalva = localStorage.getItem('minhaChavePrivada');
    return chaveSalva ? this.wallets.find(w => w.privateKey === chaveSalva) : null;
  }
  
  renderTudo() {
    if (this.minhaWallet) {
      document.getElementById('meuSaldo').textContent = `${this.minhaWallet.balance.toFixed(2)} EDE`;
      document.getElementById('minhaChave').value = this.minhaWallet.privateKey;
      document.getElementById('minhaWalletId').textContent = this.minhaWallet.id;
      document.getElementById('nomeTitular').textContent = this.minhaWallet.nome;
      document.getElementById('walletInfo').style.display = 'block';
    }
    
    const walletsHtml = this.wallets.map(w => `
      <div style="padding:15px;border:1px solid #eee;border-radius:10px;margin:10px 0;background:${w.status === 'admin' ? '#d4edda' : '#f9f9f9'};${w.status === 'admin' ? 'border-left:5px solid #28a745;' : ''}">
        <div style="font-weight:bold;font-size:16px;">${w.id}</div>
        <div style="font-size:14px;">${w.nome}</div>
        <div style="color:#4caf50;font-size:20px;font-weight:bold;">${w.balance.toFixed(2)} EDE</div>
        <div style="font-size:12px;color:#666;">${w.privateKey.slice(0,24)}... | ${w.data}</div>
      </div>
    `).join('');
    
    document.getElementById('todasWallets').innerHTML = walletsHtml || 'Nenhuma carteira';
  }
}

// ğŸš€ INICIALIZA COM ADMIN FORÃ‡ADA
const payEDE_INT = new PayEDE_INT();
window.payEDE_INT = payEDE_INT;

function copiarMinhaChave() {
  const chave = document.getElementById('minhaChave');
  chave.select();
  document.execCommand('copy');
  alert('âœ… Chave Admin copiada!\n\n' + chave.value);
}
</script>
</body>
</html>
