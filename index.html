<!DOCTYPE html>
<html>
<head>
<title>‚ö°Ô∏è TERA v4.0 WALLET</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Segoe UI',sans-serif;background:linear-gradient(135deg,#0a0a0a 0%,#1a1a2e 50%,#16213e 100%);color:#fff;min-height:100vh;padding:20px;}
.container{max-width:1200px;margin:0 auto;}
h1{text-align:center;font-size:2.5em;margin-bottom:30px;background:linear-gradient(45deg,#ff6b6b,#4ecdc4,#45b7d1);background-size:200% 200%;-webkit-background-clip:text;-webkit-text-fill-color:transparent;animation:gradient 3s ease infinite;}
@keyframes gradient{0%{background-position:0% 50%;}50%{background-position:100% 50%;}100%{background-position:0% 50%;}}
.card{background:rgba(255,255,255,0.1);backdrop-filter:blur(20px);border-radius:20px;padding:30px;margin-bottom:30px;border:1px solid rgba(255,255,255,0.2);}
.wallet-section{margin-bottom:30px;}
#carteira-section{background:linear-gradient(135deg,rgba(255,107,107,0.2),rgba(78,205,196,0.2));border:2px solid rgba(255,107,107,0.5);}
input,button{width:100%;padding:15px;margin:10px 0;border:none;border-radius:12px;font-size:16px;font-family:inherit;transition:all 0.3s;}
input{background:rgba(255,255,255,0.9);color:#333;}
button{background:linear-gradient(45deg,#ff6b6b,#4ecdc4);color:white;cursor:pointer;font-weight:bold;text-transform:uppercase;}
button:hover{transform:translateY(-2px);box-shadow:0 10px 25px rgba(255,107,107,0.4);}
.ledger{max-height:400px;overflow-y:auto;background:rgba(0,0,0,0.3);border-radius:15px;padding:20px;}
.tx{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid rgba(255,255,255,0.1);font-size:14px;}
.tx:last-child{border-bottom:none;}
.from,to{font-weight:bold;color:#4ecdc4;}
.amount{font-size:18px;}
.positive{color:#4ecdc4;}
.negative{color:#ff6b6b;}
.balance{display:flex;justify-content:space-between;align-items:center;font-size:24px;font-weight:bold;margin:20px 0;background:rgba(255,255,255,0.1);padding:20px;border-radius:15px;}
@media(max-width:768px){.container{padding:10px;}h1{font-size:2em;}}
</style>
</head>
<body>
<div class="container">
<h1>‚ö°Ô∏è TERA v4.0 WALLET</h1>

<!-- üëá NOVA SE√á√ÉO CARTEIRA (SALVA NO LOCALSTORAGE) -->
<div id="carteira-section" class="card wallet-section">
  <h2>üí≥ Minha Carteira</h2>
  <input id="meuNome" placeholder="Digite seu nome/loja/wallet">
  <button onclick="salvarMinhaCarteira()">üíæ Salvar Carteira</button>
  <div id="infoCarteira" style="margin-top:15px;color:#4ecdc4;font-weight:bold;"></div>
</div>

<div class="card">
  <h2>üí∞ Saldo Atual</h2>
  <div class="balance" id="balance">R$ 0,00</div>
  
  <div class="wallet-section">
    <h3>Transferir</h3>
    <input id="from" placeholder="De (sua wallet salva)" readonly>
    <input id="to" placeholder="Para">
    <input id="amount" type="number" placeholder="Valor" step="0.01">
    <button onclick="sendTx()">üöÄ Enviar</button>
  </div>
</div>

<div class="card">
  <h2>üìä Ledger (Hist√≥rico)</h2>
  <div id="ledger" class="ledger"></div>
</div>
</div>

<script>
// üëá VARI√ÅVEIS GLOBAIS
let balance = 0;
let transactions = JSON.parse(localStorage.getItem('teraTxs')) || [];
let minhaCarteira = localStorage.getItem('teraCarteira') || '';

// üëá CARREGAR CARTEIRA SALVA
document.getElementById('from').value = minhaCarteira;
document.getElementById('meuNome').value = minhaCarteira;
updateInfoCarteira();

function updateInfoCarteira() {
  const info = document.getElementById('infoCarteira');
  if(minhaCarteira) {
    info.innerHTML = `‚úÖ Carteira salva: <strong>${minhaCarteira}</strong>`;
  } else {
    info.innerHTML = '‚ùå Nenhuma carteira salva';
  }
}

// üëá SALVAR CARTEIRA
async function salvarMinhaCarteira() {
  const nome = document.getElementById('meuNome').value.trim();
  if(!nome) return alert('Digite um nome/loja!');
  
  localStorage.setItem('teraCarteira', nome);
  minhaCarteira = nome;
  document.getElementById('from').value = nome;
  updateInfoCarteira();
  alert('‚úÖ Carteira salva!');
}

// üëá ENVIAR TRANSA√á√ÉO
async function sendTx() {
  const from = document.getElementById('from').value.trim();
  const to = document.getElementById('to').value.trim();
  const amount = parseFloat(document.getElementById('amount').value);
  
  if(!from || !to || !amount || amount <= 0) {
    return alert('Preencha todos os campos corretamente!');
  }
  
  // SIMULA√á√ÉO BLOCKCHAIN (gera hash √∫nico)
  const txHash = '0x' + Math.random().toString(16).substr(2,64);
  const timestamp = new Date().toLocaleString('pt-BR');
  
  const tx = { from, to, amount, hash: txHash, time: timestamp, type: 'sent' };
  transactions.unshift(tx);
  localStorage.setItem('teraTxs', JSON.stringify(transactions.slice(0,100))); // max 100 tx
  
  balance -= amount;
  updateBalance();
  loadLedger();
  
  // LIMPA FORM
  document.getElementById('to').value = '';
  document.getElementById('amount').value = '';
  
  alert(`‚úÖ TX enviada!
Hash: ${txHash.slice(0,10)}...`);
}

// üëá ATUALIZAR SALDO
function updateBalance() {
  document.getElementById('balance').innerHTML = 
    `R$ ${balance.toLocaleString('pt-BR', {minimumFractionDigits:2,maximumFractionDigits:2})}`;
}

// üëá CARREGAR LEDGER
function loadLedger() {
  const ledger = document.getElementById('ledger');
  let html = '';
  
  transactions.forEach(tx => {
    const isMine = tx.from === minhaCarteira || tx.to === minhaCarteira;
    if(!isMine) return; // s√≥ mostra minhas tx
    
    const typeClass = tx.from === minhaCarteira ? 'negative' : 'positive';
    const arrow = tx.from === minhaCarteira ? '‚Üí' : '‚Üê';
    
    html += `
      <div class="tx">
        <div>
          <span class="from">${tx.from.slice(0,8)}...</span> ${arrow} 
          <span class="to">${tx.to.slice(0,8)}...</span>
        </div>
        <div>
          <span class="amount ${typeClass}">R$ ${tx.amount.toFixed(2)}</span>
          <br><small>${tx.time}</small>
        </div>
      </div>
    `;
  });
  
  ledger.innerHTML = html || '<div style="text-align:center;color:#888;">Nenhuma transa√ß√£o</div>';
}

// üëá AUTO-REFRESH (5s)
setInterval(() => {
  loadLedger();
  updateBalance();
}, 5000);

// üëá INICIALIZA
loadLedger();
updateBalance();
</script>
</body>
</html>